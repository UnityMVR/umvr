// <auto-generated>
//	 This code was generated by a tool.
//
//	 Changes to this file may cause incorrect behavior and will be lost if
//	 the code is regenerated.
// </auto-generated>

using pindwin.umvr.Model;
using System.Collections.Generic;
using UniRx;

// ReSharper disable once CheckNamespace
namespace GenTest
{
	public partial class CascadeDisposeTestModel : Model<CascadeDisposeTestModel>, ICascadeDisposeTest
	{
		private SingleProperty<System.Int32> _prop0;
		public System.Int32 Prop0
		{
			get => _prop0.Value;
			set
			{
				_prop0.Value = value;
			}
		}

		public System.Int32 Prop1
		{
			get; private set;
		}

		private ModelSingleProperty<pindwin.umvr.example.IFoo> _prop2;
		public pindwin.umvr.example.IFoo Prop2
		{
			get => _prop2.Value;
			set
			{
				if(Prop2 != null) { Prop2.Disposing -= CascadeDispose; }
				_prop2.Value = value;
				if(Prop2 != null) { Prop2.Disposing += CascadeDispose; }
			}
		}

		public pindwin.umvr.example.IFoo Prop3
		{
			get; private set;
		}

		private CollectionProperty<System.Int32> _prop4;
		public IList<System.Int32> Prop4
		{
			get => _prop4.Collection;
			set => _prop4 = new CollectionProperty<System.Int32>(nameof(Prop4), _prop4.Collection, value);
		}

		private ModelCollectionProperty<pindwin.umvr.example.IFoo> _prop5;
		public IList<pindwin.umvr.example.IFoo> Prop5
		{
			get => _prop5.Collection;
			set => _prop5 = new ModelCollectionProperty<pindwin.umvr.example.IFoo>(nameof(Prop5), _prop5.Collection, value);
		}


		public CascadeDisposeTestModel(pindwin.umvr.Model.Id id, System.Int32 prop1, pindwin.umvr.example.IFoo prop3) : base(id)
		{
			_prop0 = new SingleProperty<System.Int32>(nameof(Prop0));
			Prop0 = default;

			Prop1 = prop1;

			_prop2 = new ModelSingleProperty<pindwin.umvr.example.IFoo>(nameof(Prop2));
			Prop2 = default;
			Disposing += _ => _prop2?.Dispose();

			Prop3 = prop3;
			if(Prop3 != null) { Prop3.Disposing += CascadeDispose; }
			Disposing += _ => Prop3?.Dispose();

			_prop4 = new CollectionProperty<System.Int32>(nameof(Prop4));

			_prop5 = new ModelCollectionProperty<pindwin.umvr.example.IFoo>(nameof(Prop5));
			Disposing += _ => 
			{
				foreach (var item in Prop5)
				{
					item.Dispose();
				}
				_prop5?.Dispose();
			};

			// Prop6 not initialized because of custom implementation & initialization flag

			// Prop7 not initialized because of custom implementation & initialization flag

			// Prop8 not initialized because of custom implementation & initialization flag
			Disposing += _ => Prop8?.Dispose();

			// Prop9 not initialized because of custom implementation & initialization flag
			Disposing += _ => Prop9?.Dispose();

			// Prop10 not initialized because of custom implementation & initialization flag

			// Prop11 not initialized because of custom implementation & initialization flag
			Disposing += _ => 
			{
				foreach (var item in Prop11)
				{
					item.Dispose();
				}
				// No cascade dispose because of custom implementation
			};

			RegisterDataStreams(this);
		}
	}
}